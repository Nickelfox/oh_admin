<div class='p-4 bg-white'>
  <div class='container-fluid p-0'>
    <div class='row'>
      <div class='col-12'>
        <div class='container-fluid p-0'>
          <form class='row mb-4' [formGroup]='rangeFilterGroup'>
            <div class='col-md-12 col-lg-3 '>
              <hidden-innovation-dashboard-count-card [count]='store.totalUsers$ | async'
                                                      [isLoading]='store.isChangeLoading$ | async'
                                                      [change]='-89' cardTitle='Total Users'
                                                      icon='people'>
              </hidden-innovation-dashboard-count-card>
            </div>
            <div class='col-md-12 col-lg-3 mt-lg-0 mt-3'>
              <hidden-innovation-dashboard-count-card [isLoading]='store.isChangeLoading$ | async'
                                                      cardTitle='Total App Downloads'
                                                      icon='file_download'></hidden-innovation-dashboard-count-card>
            </div>
            <div class='col-md-12 col-lg-6 mt-lg-0 mt-3'>
              <mat-card class='bg-light h-100' style='padding: 10px'>
                <div class='container-fluid p-0'>
                  <div class='row'>
                    <div class='col-6'>
                      <hidden-innovation-common-form-field-date
                        *ngIf='rangeFilterGroup.value.type === dashboardRangeFilterEnum.DAILY'
                        startControlPath='start'
                        endControlPath='end'
                        [maxDate]='maxDate'></hidden-innovation-common-form-field-date>
                      <hidden-innovation-common-form-field-month
                        *ngIf='rangeFilterGroup.value.type === dashboardRangeFilterEnum.MONTHLY'
                        controlPath='start'
                        [maxDate]='maxDate'></hidden-innovation-common-form-field-month>
                      <hidden-innovation-common-form-field-week
                        *ngIf='rangeFilterGroup.value.type === dashboardRangeFilterEnum.WEEKLY'
                        startControlPath='start'
                        endControlPath='end'
                        [maxDate]='maxDate'></hidden-innovation-common-form-field-week>
                    </div>
                    <div class='col-6'>
                      <mat-form-field class='w-100'>
                        <mat-label>Range Filter</mat-label>
                        <mat-select formControlName='type'>
                          <mat-option *ngFor='let op of dashboardRangeTypes'
                                      [value]='op'>{{op | titlecase}}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </mat-card>
            </div>
          </form>
          <div class='row mb-4'>
            <div class='col-lg-6 col-md-12 mt-lg-0 mt-3'>
              <hidden-innovation-line-chart [chartData]='$any(store.registeredUsersData$ | async)'
                                            [chartLabels]='$any(store.registeredUsersLabel$ | async)'
                                            label='Registered Users'
                                            [isLoading]='(store.isLineChartLoading$ | async)'
                                            icon='how_to_reg'></hidden-innovation-line-chart>
            </div>
            <div class='col-lg-6 col-md-12 mt-lg-0 mt-3'>
              <hidden-innovation-line-chart [chartData]='$any(store.activeUserData$ | async)'
                                            [chartLabels]='$any(store.activeUserLabel$ | async)'
                                            label='Active Users'
                                            [isLoading]='(store.isLineChartLoading$ | async)'
                                            icon='sports_martial_arts'></hidden-innovation-line-chart>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div class='row'>
      <div class='col-lg-6 col-md-12 mt-lg-0 mt-3'>
        <hidden-innovation-dashboard-user-demographic [femaleBarData]='store.femaleUsers$ | async'
                                                      [nonBinaryBarData]='store.nonBinaryUsers$ | async'
                                                      [maleBarData]='store.maleUsers$ | async'
                                                      [isLoading]='(store.isChangeLoading$ | async)'
                                                      [ratioChartData]='store.ageRatioData$ | async'></hidden-innovation-dashboard-user-demographic>
      </div>
      <div class='col-lg-6 col-md-12 mt-lg-0 mt-3'>
        <div class='row'>
          <ng-template [ngIf]='(store.isChangeLoading$ | async)' [ngIfElse]='assessmentLoadingElse'>
            <div class='col-6'>
              <ng-container *ngTemplateOutlet='dummyShimmerRef'></ng-container>
            </div>
            <div class='col-6'>
              <ng-container *ngTemplateOutlet='dummyShimmerRef'></ng-container>
            </div>
            <ng-template #dummyShimmerRef>
              <hidden-innovation-shimmer
                [rounded]='true'
                height='500px'
                width='100%'
              ></hidden-innovation-shimmer>
            </ng-template>
          </ng-template>
          <ng-template #assessmentLoadingElse>
            <div class='col-lg-6 col-md-12 mt-lg-0 mt-3'>
              <mat-card>
                <div class='container-fluid p-0'>
                  <div class='row'>
                    <div class='col-12'>
                      <div class='d-flex align-items-center mb-3'>
                        <mat-icon color='primary' class='mr-1 card-icon'>people_alt</mat-icon>
                        <h4 class='mat-h4 mb-0 text-color__primary font-calibri'>Assessment Test
                          Engagement</h4>
                      </div>
                    </div>
                  </div>
                  <div class='row justify-content-center'>
                    <div class='col-12 mb-4 d-flex align-items-center justify-content-center'>
                      <canvas
                        class='w-100'
                        baseChart
                        chartType='doughnut'
                        [colors]='doughnutChartColorTest'
                        [data]='$any(store.assessmentTestEngagementData$ | async)'
                        [labels]='$any(store.assessmentTestEngagementLables$ | async)'
                        [legend]='chartLegendTest'
                      ></canvas>
                    </div>
                    <div class='col-12 d-flex flex-column justify-content-around'>
                      <div class='container-fluid p-0 w-100'>
                        <ng-container *ngIf='(store.assessmentTestEngagementData$ | async) as labels'>
                          <ng-container
                            *ngFor='let category of (store.assessmentTestEngagementLables$ | async); let i=index'>
                            <div class='row mb-2'>
                              <div class='col-12'>
                                <div class='w-100' mat-stroked-button
                                     [ngStyle]='{"color": colors[category]}'>
                                  <div class='d-flex align-items-center pt-1 py-0'>
                                    <mat-icon class='test-icon'>fiber_manual_record</mat-icon>

                                    <div class='d-flex  align-items-center justify-content-between'
                                         [ngStyle]='{width: "calc(100% - 10px)"}'>
                                      <h4 class='mat-h4 m-0 ml-2'>{{category}}</h4>
                                      <h4 class='mat-h1 m-0'
                                          [ngStyle]='{"color": colors[category]}'>{{labels[i]}} %</h4>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>

                          </ng-container>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                </div>
              </mat-card>
            </div>
            <div class='col-lg-6 col-md-12 mt-lg-0 mt-3'>
              <mat-card>
                <div class='container-fluid p-0'>
                  <div class='row'>
                    <div class='col-12'>
                      <div class='d-flex align-items-center mb-3'>
                        <mat-icon color='primary' class='mr-1 card-icon'>people_alt</mat-icon>
                        <h4 class='mat-h4 mb-0 text-color__primary font-calibri'>Complete Test
                          Engagement</h4>
                      </div>
                    </div>
                  </div>
                  <div class='row justify-content-center'>
                    <div class='col-12 mb-4 d-flex align-items-center justify-content-center'>
                      <canvas
                        class='w-100'
                        baseChart
                        chartType='doughnut'
                        [colors]='doughnutChartColorComplete'
                        [data]='$any(store.completeTestEngagementData$ | async)'
                        [labels]='$any(store.completeTestEngagementLables$ | async)'
                        [legend]='chartLegendComplete'
                      ></canvas>
                    </div>
                    <div class='col-12 d-flex flex-column justify-content-around'>
                      <div class='container-fluid p-0 w-100'>
                        <ng-container *ngIf='(store.completeTestEngagementLables$ | async) as completeTestLabels'>
                          <ng-container
                            *ngFor='let test of (store.completeTestEngagementData$ | async);let i = index'>
                            <div class='row mb-2'>
                              <div class='col-12'>
                                <div class='w-100' mat-stroked-button
                                     [ngStyle]='{"color": completeTestColors[i]}'>
                                  <div class='d-flex align-items-center pt-1 py-0'>
                                    <mat-icon class='test-icon '>fiber_manual_record
                                    </mat-icon>
                                    <div class='d-flex  align-items-center justify-content-between'
                                         [ngStyle]='{width: "calc(100% - 10px)"}'>
                                      <h4 class='mat-h4 m-0 ml-3 text-uppercase text-nowrap text-truncate overflow-hidden'
                                          [ngStyle]='{width: "calc(100% - 60px)"}'>{{completeTestLabels[i]}}</h4>
                                      <h4 class='mat-h1 m-0'
                                          [ngStyle]='{"color": completeTestColors[i]}'>{{test}} %</h4>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                        </ng-container>

                        <!--                                            <div class='row mb-2'>-->
                        <!--                                                <div class='col-12'>-->
                        <!--                                                    <div class='w-100' mat-stroked-button-->
                        <!--                                                         [ngStyle]='{"color": colors.test1}'>-->
                        <!--                                                        <div class='d-flex align-items-center pt-1 py-0'>-->
                        <!--                                                            <mat-icon class='test-icon'>fiber_manual_record</mat-icon>-->

                        <!--                                                            <div class='d-flex  align-items-center justify-content-between'-->
                        <!--                                                                 [ngStyle]='{width: "calc(100% - 42px)"}'>-->
                        <!--                                                                <h3 class='mat-h4 m-0 ml-3'>Test 1</h3>-->
                        <!--                                                                <h3 class='mat-h1 m-0'-->
                        <!--                                                                    [ngStyle]='{"color": colors.test1}'>10 %</h3>-->
                        <!--                                                            </div>-->
                        <!--                                                        </div>-->
                        <!--                                                    </div>-->
                        <!--                                                </div>-->
                        <!--                                            </div>-->
                        <!--                                            <div class='row mb-2'>-->
                        <!--                                                <div class='col-12'>-->
                        <!--                                                    <div class='w-100' mat-stroked-button-->
                        <!--                                                         [ngStyle]='{"color": colors.test2}'>-->
                        <!--                                                        <div class='d-flex align-items-center pt-1 py-0'>-->
                        <!--                                                            <mat-icon class='test-icon'>fiber_manual_record</mat-icon>-->

                        <!--                                                            <div class='d-flex  align-items-center justify-content-between'-->
                        <!--                                                                 [ngStyle]='{width: "calc(100% - 42px)"}'>-->
                        <!--                                                                <h3 class='mat-h4 m-0 ml-3'>Test 2</h3>-->
                        <!--                                                                <h3 class='mat-h1 m-0'-->
                        <!--                                                                    [ngStyle]='{"color": colors.test2}'>20 %</h3>-->
                        <!--                                                            </div>-->
                        <!--                                                        </div>-->
                        <!--                                                    </div>-->
                        <!--                                                </div>-->
                        <!--                                            </div>-->
                        <!--                                            <div class='row mb-2'>-->
                        <!--                                                <div class='col-12'>-->
                        <!--                                                    <div class='w-100' mat-stroked-button-->
                        <!--                                                         [ngStyle]='{"color": colors.test3}'>-->
                        <!--                                                        <div class='d-flex align-items-center pt-1 py-0'>-->
                        <!--                                                            <mat-icon class='test-icon'>fiber_manual_record</mat-icon>-->

                        <!--                                                            <div class='d-flex  align-items-center justify-content-between'-->
                        <!--                                                                 [ngStyle]='{width: "calc(100% - 42px)"}'>-->
                        <!--                                                                <h3 class='mat-h4 m-0 ml-3'>Test 3</h3>-->
                        <!--                                                                <h3 class='mat-h1 m-0'-->
                        <!--                                                                    [ngStyle]='{"color": colors.test3}'>30 %</h3>-->
                        <!--                                                            </div>-->
                        <!--                                                        </div>-->
                        <!--                                                    </div>-->
                        <!--                                                </div>-->
                        <!--                                            </div>-->
                        <!--                                            <div class='row mb-2'>-->
                        <!--                                                <div class='col-12'>-->
                        <!--                                                    <div class='w-100' mat-stroked-button-->
                        <!--                                                         [ngStyle]='{"color": colors.test4}'>-->
                        <!--                                                        <div class='d-flex align-items-center pt-1 py-0'>-->
                        <!--                                                            <mat-icon class='test-icon'>fiber_manual_record</mat-icon>-->

                        <!--                                                            <div class='d-flex  align-items-center justify-content-between'-->
                        <!--                                                                 [ngStyle]='{width: "calc(100% - 42px)"}'>-->
                        <!--                                                                <h3 class='mat-h4 m-0 ml-3'>Test 4</h3>-->
                        <!--                                                                <h3 class='mat-h1 m-0'-->
                        <!--                                                                    [ngStyle]='{"color": colors.test4}'>50 %</h3>-->
                        <!--                                                            </div>-->
                        <!--                                                        </div>-->
                        <!--                                                    </div>-->
                        <!--                                                </div>-->
                        <!--                                            </div>-->
                        <!--                                            <div class='row mb-2'>-->
                        <!--                                                <div class='col-12'>-->
                        <!--                                                    <div class='w-100' mat-stroked-button-->
                        <!--                                                         [ngStyle]='{"color": colors.test5}'>-->
                        <!--                                                        <div class='d-flex align-items-center pt-1 py-0'>-->
                        <!--                                                            <mat-icon class='test-icon'>fiber_manual_record</mat-icon>-->

                        <!--                                                            <div class='d-flex  align-items-center justify-content-between'-->
                        <!--                                                                 [ngStyle]='{width: "calc(100% - 42px)"}'>-->
                        <!--                                                                <h3 class='mat-h4 m-0 ml-3'>Test 5</h3>-->
                        <!--                                                                <h3 class='mat-h1 m-0'-->
                        <!--                                                                    [ngStyle]='{"color": colors.test5}'>70 %</h3>-->
                        <!--                                                            </div>-->
                        <!--                                                        </div>-->
                        <!--                                                    </div>-->
                        <!--                                                </div>-->
                        <!--                                            </div>-->
                        <!--                                            <div class='row mb-2'>-->
                        <!--                                                <div class='col-12'>-->
                        <!--                                                    <div class='w-100' mat-stroked-button-->
                        <!--                                                         [ngStyle]='{"color": colors.test6}'>-->
                        <!--                                                        <div class='d-flex align-items-center pt-1 py-0'>-->
                        <!--                                                            <mat-icon class='test-icon'>fiber_manual_record</mat-icon>-->

                        <!--                                                            <div class='d-flex  align-items-center justify-content-between'-->
                        <!--                                                                 [ngStyle]='{width: "calc(100% - 42px)"}'>-->
                        <!--                                                                <h3 class='mat-h4 m-0 ml-3'>Test 6</h3>-->
                        <!--                                                                <h3 class='mat-h1 m-0'-->
                        <!--                                                                    [ngStyle]='{"color": colors.test6}'>20 %</h3>-->
                        <!--                                                            </div>-->
                        <!--                                                        </div>-->
                        <!--                                                    </div>-->
                        <!--                                                </div>-->
                        <!--                                            </div>-->
                      </div>
                    </div>
                  </div>
                </div>
              </mat-card>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
</div>
