<mat-sidenav-container autosize>
  <mat-sidenav *ngIf="authFacade.loggedIn$ | async" [mode]="isTablet ? 'over' : 'side'" (closed)="isSliding = false"
               (opened)="isSliding = false"
               [fixedInViewport]="true" [opened]="sideBarOpen">
    <div class="d-flex flex-column  h-100">
      <div class="text-center mt-5 mb-5 d-flex flex-column align-items-center">
        <img src="assets/white_logo.svg" alt="" class="oh-logo img-fluid">
        <h4 class="font-calibri--bold mat-h4 mb-0 mt-2 oh-logo__text">Optimal Humans</h4>
      </div>
      <mat-nav-list role="navigation">
        <a [routerLink]="[nav.path]" *ngFor="let nav of uiStore.navItems$ | async" mat-list-item
           class="font-weight-normal text-dark">{{nav.label}}</a>
      </mat-nav-list>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <mat-toolbar *ngIf="authFacade.loggedIn$ | async">
      <div class="d-flex align-items-center">
        <button mat-icon-button class="primary-color" color="primary" (click)="sideBarToggle()">
          <mat-icon>menu</mat-icon>
        </button>
        <ng-container *ngIf="(breadcrumbService.breadcrumbs$ | async) as br">
          <h2 class="mat-h2 m-0 mx-3 text-dark font-sf-pro">{{(br[0]?.label)}}</h2>
        </ng-container>
        <ng-container *ngIf="!(breadcrumbService.breadcrumbs$ | async)">
          --
        </ng-container>
      </div>
      <span class="spacer"></span>
      <div class="d-flex align-items-center">
        <!--        <button mat-button color="primary" class="mini mx-1">-->
        <!--          <mat-icon class="mr-1">admin_panel_settings</mat-icon>-->
        <!--          Dummy User-->
        <!--        </button>-->
        <!--        <button mat-flat-button color="accent" class="mini" (click)="logoutPrompt()">Logout</button>-->
        <button mat-stroked-button class="pl-0 ml-1 mr-1 mat-subheading-2 mb-0 font-weight-bolder">
          <div class="d-flex align-items-center">
            <div class="toolbar__user-icon d-flex align-items-center justify-content-center pointer-event mr-3 ml-1">
              <img
                src='https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8dXNlcnxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&w=1000&q=80'
                alt="User Image" class="img-fluid avatar-image">
            </div>
            <span>Dummy User</span>
          </div>
        </button>
        <button mat-icon-button [matMenuTriggerFor]="userBarmenu">
          <mat-icon>expand_more</mat-icon>
        </button>
        <mat-menu #userBarmenu="matMenu">
          <button mat-menu-item [routerLink]="['/profile']">Profile</button>
          <button mat-menu-item [routerLink]="['/change-password']">Change Password</button>
          <button mat-menu-item (click)="logoutPrompt()">Logout</button>
        </mat-menu>
      </div>
    </mat-toolbar>
    <main>
      <router-outlet></router-outlet>
      <button mat-flat-button color="primary" class="loginStatus">
        <ng-template [ngIf]="authFacade.loggedIn$ | async" [ngIfElse]="authStatusElse">
          <mat-icon color="accent">blur_on</mat-icon>
          &nbsp;&nbsp;&nbsp;AUTH STATUS
        </ng-template>
        <ng-template #authStatusElse>
          <mat-icon color="warn">blur_on</mat-icon>
          &nbsp;&nbsp;&nbsp;AUTH STATUS
        </ng-template>
      </button>
    </main>
  </mat-sidenav-content>
</mat-sidenav-container>
